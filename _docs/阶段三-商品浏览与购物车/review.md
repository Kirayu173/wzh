# 阶段三评审报告（商品浏览与购物车）

## 1. 评审范围
- Android 客户端：商品列表、商品详情、购物车模块及本地缓存逻辑
- 后端服务：商品与购物车接口、服务层与数据持久化
- 阶段三相关文档（Spec/Code/Test/Review）

## 2. 评审方法
- 静态代码走查
- 测试结果复核（后端 `mvn test`、Android Lint）
- 配置与依赖审查

## 3. 评审发现
- 代码质量：后端控制器/服务/仓库分层清晰；Android 模块化分层与 MVP 基类复用良好。
- 架构设计：后端延续 JWT 鉴权，Android 采用 Retrofit + Room 本地缓存，与阶段决策保持一致。
- 性能：商品列表支持分页，图片加载使用 Glide 缓存；列表刷新使用 `notifyDataSetChanged`，大列表性能可进一步优化。
- 安全性：`application.yml` 的 JWT 密钥仍为占位值；Android 仍启用 `usesCleartextTraffic`，需明确仅用于开发环境。
- 可维护性：离线购物车仅本地保存，未自动回写服务端，跨端一致性需在后续阶段明确策略。
- 文档完整性：阶段三 Code/Test/Review 文档已补齐，暂无缺失。

## 4. 改进建议
- 商品列表与购物车列表可引入 DiffUtil 或局部刷新，降低 UI 重绘成本。
- 补充离线购物车与服务端同步策略（如重试队列或用户触发同步）。
- 将 JWT 密钥移入环境变量或安全配置中心，避免生产环境误用占位值。
- 对明文 HTTP 访问设置仅限开发环境的网络安全策略。

## 5. 风险评估
- 中风险：离线购物车未自动同步，可能导致跨设备购物车不一致。
- 中风险：JWT 密钥占位值未替换可能导致生产安全隐患。
- 低风险：明文 HTTP 访问未限制，需在发布前关闭或限制。
- 低风险：列表刷新全量更新在大数据量场景可能带来性能损耗。
