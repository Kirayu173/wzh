# 阶段二评审报告（用户认证与基础功能）

## 1. 评审范围
- Android 客户端认证与主页面模块
- 后端认证接口与安全配置
- 阶段二相关文档（Spec/ADR/Code/Test）

## 2. 评审方法
- 静态代码走查
- 测试结果复核（后端 `mvn test`、Android Lint）
- 配置与依赖审查

## 3. 评审发现
- 代码质量：模块职责清晰，认证逻辑分层合理；Android 侧登录态管理集中在 `AuthManager`。
- 架构设计：后端 JWT + BCrypt，与 ADR 选择一致；Android 采用 MVP 基类与功能模块拆分。
- 性能：OkHttp 日志拦截器在非 Debug 环境下仍可能输出，存在性能与日志体积风险。
- 安全性：`application.yml` 中 JWT 密钥为占位值；`usesCleartextTraffic` 启用，需明确仅用于开发环境。
- 可维护性：Lint 规则中禁用了版本更新相关检查，需建立独立依赖升级流程。
- 文档完整性：阶段二 Code/Test/Review 文档已补齐。

## 4. 改进建议
- 仅在 Debug 构建中开启网络日志拦截器。
- 将 JWT 密钥移入环境变量或安全配置中心，并为生产环境设置更强策略。
- 对 HTTP 明文访问设置仅限本地/开发的网络安全策略。
- 建立依赖升级与 targetSdk 周期性评审机制，避免版本滞后。

## 5. 风险评估
- 中风险：JWT 密钥占位值未替换可能导致生产安全隐患。
- 低风险：HTTP 明文访问在非生产环境可接受，但需在发布前关闭或限制。
- 低风险：Lint 版本检查被禁用，长期可能导致依赖过期与兼容性问题。
